<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
  <title>Breath Hold Visual</title>
  <style>
    :root{
      --bg: #0c0f16;
      --text: rgba(255,255,255,.92);
      --muted: rgba(255,255,255,.65);
      --ring: rgba(255,255,255,.85);
      --ringThin: rgba(255,255,255,.28);
      --fill: rgba(0,0,0,.45); /* the expanding inner circle */
      --accent: #57e3ff;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      min-height:100svh;
      display:grid;
      place-items:center;
      padding:18px;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      background:
        radial-gradient(1200px 900px at 50% 20%, rgba(87,227,255,.10), transparent 60%),
        radial-gradient(900px 700px at 50% 85%, rgba(255,77,109,.08), transparent 60%),
        var(--bg);
      color: var(--text);
    }

    .shell{
      width:min(520px, 100%);
      padding:18px 18px 16px;
      border-radius:22px;
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
      border: 1px solid rgba(255,255,255,.10);
      box-shadow: 0 18px 50px rgba(0,0,0,.45);
    }

    .header{
      display:flex;
      justify-content:space-between;
      gap:12px;
      align-items:flex-start;
      margin-bottom:10px;
    }
    .title{
      margin:0;
      font-size:18px;
      font-weight:900;
      letter-spacing:.2px;
    }
    .subtitle{
      margin:6px 0 0;
      color: var(--muted);
      font-size:13px;
      line-height:1.35;
    }
    .badge{
      padding:8px 10px;
      border-radius:999px;
      background: rgba(255,255,255,.07);
      border: 1px solid rgba(255,255,255,.10);
      color: var(--muted);
      font-weight:800;
      font-size:12px;
      white-space:nowrap;
    }

    .stage{
      display:grid;
      place-items:center;
      margin: 10px 0 12px;
    }

    .dial{
      width:min(380px, 82vw);
      aspect-ratio:1/1;
      position:relative;
      display:grid;
      place-items:center;
    }

    /* Outer ring */
    .ring{
      position:absolute;
      inset: 0;
      border-radius: 999px;
      border: 10px solid var(--ringThin);
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
    }
    .ringStrong{
      position:absolute;
      inset: 0;
      border-radius: 999px;
      border: 10px solid rgba(255,255,255,.22);
      mask: radial-gradient(circle, transparent 62%, #000 63%); /* subtle rim */
      pointer-events:none;
    }

    /* Expanding inner fill circle */
    .fill{
      width: 0%;
      height: 0%;
      border-radius: 999px;
      background: var(--fill);
      transition: none;
    }

    .center{
      position:absolute;
      inset:0;
      display:grid;
      place-items:center;
      text-align:center;
      padding: 24px;
      pointer-events:none;
    }
    .label{
      font-size:44px;
      font-weight:950;
      letter-spacing:.5px;
      text-transform: uppercase;
      line-height:1.05;
      text-shadow: 0 8px 30px rgba(0,0,0,.45);
    }
    .timer{
      margin-top:10px;
      font-size:18px;
      font-weight:850;
      color: var(--muted);
    }

    /* Little dots for style (optional) */
    .dot{
      position:absolute;
      width:12px; height:12px;
      border-radius:999px;
      background: rgba(255,255,255,.85);
      top: 6%;
      left: 50%;
      transform: translateX(-50%);
      box-shadow: 0 10px 20px rgba(0,0,0,.35);
    }
    .dot.small{
      width:10px; height:10px;
      background: rgba(255,255,255,.75);
      top: 14%;
      left: 18%;
    }
    .dot.small2{
      width:10px; height:10px;
      background: rgba(255,255,255,.75);
      top: 14%;
      left: 82%;
    }
    .dot.red{
      width:10px; height:10px;
      background: rgba(255,77,109,.95);
      top: 10%;
      left: 68%;
    }

    .controls{
      display:flex;
      gap:10px;
      justify-content:center;
      flex-wrap:wrap;
      margin-top: 6px;
    }
    button{
      border:0;
      border-radius:14px;
      padding: 12px 16px;
      font-weight:950;
      cursor:pointer;
    }
    .start{
      background: var(--accent);
      color:#001015;
      box-shadow: 0 10px 24px rgba(87,227,255,.18);
      min-width: 140px;
    }
    .secondary{
      background: rgba(255,255,255,.08);
      color: var(--text);
      border: 1px solid rgba(255,255,255,.12);
    }
    button:disabled{ opacity:.55; cursor:not-allowed; }

    .status{
      margin-top:10px;
      min-height:20px;
      text-align:center;
      color: var(--muted);
      font-size:13px;
    }

    .fineprint{
      margin-top: 12px;
      font-size: 12px;
      color: rgba(255,255,255,.55);
      line-height:1.35;
    }
  </style>
</head>

<body>
  <div class="shell">
    <div class="header">
      <div>
        <h1 class="title">Breath Hold Visual Test</h1>
        <p class="subtitle">Tap Start once, then screen-record. 4s inhale â†’ 60s hold fill.</p>
      </div>
      <div class="badge" id="phaseBadge">READY</div>
    </div>

    <div class="stage">
      <div class="dial">
        <div class="ring"></div>
        <div class="ringStrong"></div>

        <div class="dot"></div>
        <div class="dot small"></div>
        <div class="dot small2"></div>
        <div class="dot red"></div>

        <div class="fill" id="fill"></div>

        <div class="center">
          <div>
            <div class="label" id="label">Ready</div>
            <div class="timer" id="timer">0.0s</div>
          </div>
        </div>
      </div>
    </div>

    <div class="controls">
      <button class="start" id="startBtn">Start</button>
      <button class="secondary" id="resetBtn">Reset</button>
    </div>

    <div class="status" id="status"></div>

    <div class="fineprint">
      Safety: do this sitting down. Donâ€™t do breath-holds in water or while driving. Stop immediately if dizzy.
      For awareness/entertainment only â€” not a medical test.
    </div>
  </div>

<script>
  const startBtn = document.getElementById('startBtn');
  const resetBtn = document.getElementById('resetBtn');
  const fillEl   = document.getElementById('fill');
  const labelEl  = document.getElementById('label');
  const timerEl  = document.getElementById('timer');
  const statusEl = document.getElementById('status');
  const badgeEl  = document.getElementById('phaseBadge');

  const INHALE_MS = 4000;     // 4 seconds
  const HOLD_MS   = 60000;    // 1 minute fill

  let running = false;
  let raf = null;
  let startMs = 0;

  function setUIReady(){
    running = false;
    cancelAnimationFrame(raf);
    fillEl.style.width = "0%";
    fillEl.style.height = "0%";
    labelEl.textContent = "Ready";
    timerEl.textContent = "0.0s";
    statusEl.textContent = "";
    badgeEl.textContent = "READY";
    startBtn.disabled = false;
  }

  function format(s){ return `${s.toFixed(1)}s`; }

  function tick(now){
    if(!running) return;

    const elapsed = now - startMs;

    // Phase 1: Inhale (4s)
    if(elapsed < INHALE_MS){
      badgeEl.textContent = "INHALE";
      labelEl.textContent = "Inhale ðŸ«";
      timerEl.textContent = format(elapsed / 1000);
      // Keep fill at 0 during inhale to match your spec
      fillEl.style.width = "0%";
      fillEl.style.height = "0%";
      raf = requestAnimationFrame(tick);
      return;
    }

    // Phase 2: Hold (60s fill)
    const holdElapsed = elapsed - INHALE_MS;
    const t = Math.min(holdElapsed / HOLD_MS, 1); // 0..1

    badgeEl.textContent = "HOLD";
    labelEl.textContent = "Hold ðŸ«";
    timerEl.textContent = format((elapsed) / 1000);

    // Expand inner circle from 0% to ~100% of the dial.
    // Slightly under 100% so you still see the outer rim.
    const size = 98 * t; // percent
    fillEl.style.width  = `${size}%`;
    fillEl.style.height = `${size}%`;

    if(t >= 1){
      running = false;
      startBtn.disabled = false;
      statusEl.textContent = "Done. (Reset or Start again)";
      badgeEl.textContent = "DONE";
      return;
    }

    raf = requestAnimationFrame(tick);
  }

  function start(){
    if(running) return;
    running = true;
    startBtn.disabled = true;
    statusEl.textContent = "Recording tip: use full-screen browser for a clean capture.";
    startMs = performance.now();
    raf = requestAnimationFrame(tick);
  }

  startBtn.addEventListener('click', start);
  resetBtn.addEventListener('click', setUIReady);

  setUIReady();
</script>
</body>
</html>
